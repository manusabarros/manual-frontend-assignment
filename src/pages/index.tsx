import type { NextPage } from "next";
import Head from "next/head";
import styles from "./index.module.scss";
import Image from "next/image";
import hairLoss from "../../assets/hair-loss.png";
import erectileDysfunction from "../../assets/erectile-dysfunction.png";
import Link from "next/link";
import QuizModal from "../components/quiz-modal/QuizModal";
import { useEffect, useState } from "react";
import axios from "axios";

export interface Questions {
    questions: {
        question: string;
        type: string;
        options: {
            display: string;
            value: string;
            isRejection: boolean;
        }[];
    }[];
}

const HomePage: NextPage = () => {
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [data, setData] = useState<Questions>();

    const getData = async () => {
        try {
            const { data } = await axios.get<Questions>("https://manual-case-study.herokuapp.com/questionnaires/972423.json");
            setData(data);
        } catch (err) {
            const { data } = await axios.get<Questions>("/questions.json");
            setData(data);
        }
    };

    useEffect(() => {
        getData();
    }, []);

    return (
        <>
            <Head>
                <title>Manual: Men&apos;s Healthcare. Made easy. More than a pharmacy.</title>
                <meta
                    name="description"
                    content="We're here to help give you all the right info and choices. From erectile dysfunction to hair loss and beyond. So you can be the healthiest, happiest man you can be."
                />
                <meta name="og:title" content="Manual: Men's Healthcare. Made easy. More than a pharmacy." />
                <meta
                    name="og:description"
                    content="We're here to help give you all the right info and choices. From erectile dysfunction to hair loss and beyond. So you can be the healthiest, happiest man you can be."
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className={styles.HomePage}>
                <main>
                    <section className={styles.top}>
                        <svg>
                            <g stroke="none" strokeWidth={1} fill="none">
                                <g transform="translate(-620.000000, -11.000000)" fill="#0B3B3C">
                                    <g>
                                        <path d="M630.721479,46.6112689 C630.04212,46.6112689 629.617521,46.0958049 629.617521,45.2525502 C629.617521,41.2678528 637.524075,32.2169179 645.411437,24.5448278 C644.077854,33.1613124 635.266478,46.6112689 630.721479,46.6112689 M659.02427,11.0029031 C657.938908,11.0290584 655.712308,11.113299 653.759065,11.1413226 C653.071978,11.1511733 652.797516,11.4598572 652.885578,11.9029693 C652.989351,12.4251419 653.333446,12.8117823 653.851203,12.8254544 C654.517909,12.8431177 655.410842,12.7317877 656.555732,12.6754858 C653.953022,14.6780673 650.803936,17.3102452 647.554985,20.2387935 C647.173355,17.2924969 645.807418,14.936139 643.119788,14.936139 C639.213471,14.936139 635.307155,20.8805333 633.608757,24.1924102 C633.438917,21.4749728 632.250038,18.9273752 629.70244,18.9273752 C624.405815,18.9273752 620,30.9800593 620,32.7836735 C620,33.400277 620.705175,33.873281 621.129775,33.873281 C621.639294,33.873281 621.804888,33.6185212 621.974728,33.0240818 C624.182646,25.8058886 627.494523,20.7956134 629.70244,20.7956134 C630.806399,20.7956134 631.655599,22.0694122 631.655599,25.0416094 C631.655599,27.2284671 631.283055,28.556275 631.283055,29.0744563 C631.283055,29.8841678 631.995278,30.3066444 632.419878,30.3066444 C632.929397,30.3066444 633.099237,30.0518846 633.353997,29.4574452 C635.901595,23.1733711 640.062671,16.8892971 643.034868,16.8892971 C644.498463,16.8892971 645.494149,18.7588091 645.576266,22.048437 C636.665194,30.3157308 627.687121,40.2781111 627.687121,45.1790095 C627.687121,47.218701 628.8118,48.3945872 630.63656,48.3945872 C637.187961,48.3945872 647.441362,32.1121268 647.664532,22.3893905 C651.310399,18.9588805 654.78685,15.9632454 657.288676,14.0571329 C656.903479,15.0129066 656.515226,15.9425249 656.317702,16.6364056 C656.173083,17.1440569 656.261145,17.7022355 656.885052,17.9448517 C657.27959,18.098302 657.631243,17.8758967 657.785882,17.4349076 C658.726031,14.7523723 659.210414,13.6520649 659.785492,12.1173072 C660.161602,11.1134688 660.121435,10.976493 659.02427,11.0029031"></path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <div>
                            <h1>
                                Be good
                                <br />
                                to yourself
                            </h1>
                            <p>We&apos;re working around the clock to bring you a holistic approach to your wellness. From top to bottom, inside and out.</p>
                            <button onClick={() => setIsModalOpen(true)} disabled={!data}>
                                TAKE THE QUIZ
                            </button>
                        </div>
                    </section>
                    <section className={styles.bottom}>
                        <h3>What we can help with</h3>
                        <div>
                            <div className={styles["hair-loss"]}>
                                <span className={styles.number}>01</span>
                                <div className={styles.image}>
                                    <div>
                                        <Image src={hairLoss} alt="hair-loss" />
                                    </div>
                                </div>
                                <div className={styles.content}>
                                    <h6>HAIR LOSS</h6>
                                    <h4>Hair loss needn&apos;t be irreversible. We can help! </h4>
                                    <p>We&apos;re working around the clock to bring you a holistic approach to your wellness. From top to bottom, inside and out.</p>
                                </div>
                            </div>
                            <div className={styles["erectile-dysfunction"]}>
                                <span className={styles.number}>02</span>
                                <div className={styles.image}>
                                    <div>
                                        <Image src={erectileDysfunction} alt="erectile-dysfunction" />
                                    </div>
                                </div>
                                <div className={styles.content}>
                                    <h6>ERECTILE DYSFUNCTION</h6>
                                    <h4>Erections can be a tricky thing. But no need to feel down!</h4>
                                    <p>We&apos;re working around the clock to bring you a holistic approach to your wellness. From top to bottom, inside and out.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
                <footer>
                    <svg>
                        <g stroke="none" strokeWidth={1} fill="none">
                            <g transform="translate(-620.000000, -11.000000)" fill="#0B3B3C">
                                <g>
                                    <path d="M630.721479,46.6112689 C630.04212,46.6112689 629.617521,46.0958049 629.617521,45.2525502 C629.617521,41.2678528 637.524075,32.2169179 645.411437,24.5448278 C644.077854,33.1613124 635.266478,46.6112689 630.721479,46.6112689 M659.02427,11.0029031 C657.938908,11.0290584 655.712308,11.113299 653.759065,11.1413226 C653.071978,11.1511733 652.797516,11.4598572 652.885578,11.9029693 C652.989351,12.4251419 653.333446,12.8117823 653.851203,12.8254544 C654.517909,12.8431177 655.410842,12.7317877 656.555732,12.6754858 C653.953022,14.6780673 650.803936,17.3102452 647.554985,20.2387935 C647.173355,17.2924969 645.807418,14.936139 643.119788,14.936139 C639.213471,14.936139 635.307155,20.8805333 633.608757,24.1924102 C633.438917,21.4749728 632.250038,18.9273752 629.70244,18.9273752 C624.405815,18.9273752 620,30.9800593 620,32.7836735 C620,33.400277 620.705175,33.873281 621.129775,33.873281 C621.639294,33.873281 621.804888,33.6185212 621.974728,33.0240818 C624.182646,25.8058886 627.494523,20.7956134 629.70244,20.7956134 C630.806399,20.7956134 631.655599,22.0694122 631.655599,25.0416094 C631.655599,27.2284671 631.283055,28.556275 631.283055,29.0744563 C631.283055,29.8841678 631.995278,30.3066444 632.419878,30.3066444 C632.929397,30.3066444 633.099237,30.0518846 633.353997,29.4574452 C635.901595,23.1733711 640.062671,16.8892971 643.034868,16.8892971 C644.498463,16.8892971 645.494149,18.7588091 645.576266,22.048437 C636.665194,30.3157308 627.687121,40.2781111 627.687121,45.1790095 C627.687121,47.218701 628.8118,48.3945872 630.63656,48.3945872 C637.187961,48.3945872 647.441362,32.1121268 647.664532,22.3893905 C651.310399,18.9588805 654.78685,15.9632454 657.288676,14.0571329 C656.903479,15.0129066 656.515226,15.9425249 656.317702,16.6364056 C656.173083,17.1440569 656.261145,17.7022355 656.885052,17.9448517 C657.27959,18.098302 657.631243,17.8758967 657.785882,17.4349076 C658.726031,14.7523723 659.210414,13.6520649 659.785492,12.1173072 C660.161602,11.1134688 660.121435,10.976493 659.02427,11.0029031"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div>
                        <div>
                            <div>
                                <h6>PRODUCT</h6>
                                <Link href="#" passHref>
                                    <a>Popular</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Trending</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Guided</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Products</a>
                                </Link>
                            </div>
                            <div>
                                <h6>COMPANY</h6>
                                <Link href="#" passHref>
                                    <a>Press</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Mission</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Strategy</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>About</a>
                                </Link>
                            </div>
                            <div>
                                <h6>INFO</h6>
                                <Link href="#" passHref>
                                    <a>Support</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Customer Service</a>
                                </Link>
                                <Link href="#" passHref>
                                    <a>Get started</a>
                                </Link>
                            </div>
                            <div>
                                <h6>FOLLOW US</h6>
                                <div>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="#7e0707">
                                            <path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z" />
                                        </svg>
                                    </a>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512" fill="#7e0707">
                                            <path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z" />
                                        </svg>
                                    </a>
                                    <a href="#">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#7e0707">
                                            <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
                                        </svg>
                                    </a>
                                </div>
                                <svg>
                                    <g stroke="none" strokeWidth={1} fill="none">
                                        <g transform="translate(-620.000000, -11.000000)" fill="#0B3B3C">
                                            <g>
                                                <path d="M630.721479,46.6112689 C630.04212,46.6112689 629.617521,46.0958049 629.617521,45.2525502 C629.617521,41.2678528 637.524075,32.2169179 645.411437,24.5448278 C644.077854,33.1613124 635.266478,46.6112689 630.721479,46.6112689 M659.02427,11.0029031 C657.938908,11.0290584 655.712308,11.113299 653.759065,11.1413226 C653.071978,11.1511733 652.797516,11.4598572 652.885578,11.9029693 C652.989351,12.4251419 653.333446,12.8117823 653.851203,12.8254544 C654.517909,12.8431177 655.410842,12.7317877 656.555732,12.6754858 C653.953022,14.6780673 650.803936,17.3102452 647.554985,20.2387935 C647.173355,17.2924969 645.807418,14.936139 643.119788,14.936139 C639.213471,14.936139 635.307155,20.8805333 633.608757,24.1924102 C633.438917,21.4749728 632.250038,18.9273752 629.70244,18.9273752 C624.405815,18.9273752 620,30.9800593 620,32.7836735 C620,33.400277 620.705175,33.873281 621.129775,33.873281 C621.639294,33.873281 621.804888,33.6185212 621.974728,33.0240818 C624.182646,25.8058886 627.494523,20.7956134 629.70244,20.7956134 C630.806399,20.7956134 631.655599,22.0694122 631.655599,25.0416094 C631.655599,27.2284671 631.283055,28.556275 631.283055,29.0744563 C631.283055,29.8841678 631.995278,30.3066444 632.419878,30.3066444 C632.929397,30.3066444 633.099237,30.0518846 633.353997,29.4574452 C635.901595,23.1733711 640.062671,16.8892971 643.034868,16.8892971 C644.498463,16.8892971 645.494149,18.7588091 645.576266,22.048437 C636.665194,30.3157308 627.687121,40.2781111 627.687121,45.1790095 C627.687121,47.218701 628.8118,48.3945872 630.63656,48.3945872 C637.187961,48.3945872 647.441362,32.1121268 647.664532,22.3893905 C651.310399,18.9588805 654.78685,15.9632454 657.288676,14.0571329 C656.903479,15.0129066 656.515226,15.9425249 656.317702,16.6364056 C656.173083,17.1440569 656.261145,17.7022355 656.885052,17.9448517 C657.27959,18.098302 657.631243,17.8758967 657.785882,17.4349076 C658.726031,14.7523723 659.210414,13.6520649 659.785492,12.1173072 C660.161602,11.1134688 660.121435,10.976493 659.02427,11.0029031"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <p>© 2021 Manual. All rights reserved</p>
                </footer>
            </div>
            {data && <QuizModal isOpen={isModalOpen} setIsOpen={setIsModalOpen} data={data} />}
        </>
    );
};

export default HomePage;
